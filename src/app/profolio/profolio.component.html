<div class="container-fluid px-0" [ngClass]="{landing: !category, code: category=='code', research: category=='research'}">
	<div class="container-fluid main-content-contaier" *ngIf="data" [ngClass]="{landing: !category, code: category=='code', research: category=='research'}">
		<app-contact-links></app-contact-links>
		<div class="row min-height-100vh">
			<div class="col-12 mb-0">
				<img *ngIf="category" [src]="'assets/img/bullet_'+category+'.png'" class="title-img-position">
				<h1 class="display-1 title-position pb-5 mb-5 width-200px">
					<span [routerLink]="['/']" class="cursor-pointer">YU-<br />AN <br />CHEN<br /></span>
				</h1>
				<div class="nav-position">
					<span class="h5" *ngFor="let element of nav; let last = last" (click)="changeCategory(element)">
            <a [routerLink]="['/' + element]" class="px-2 opacity-3" [ngClass]="{active: category == element, 'landing-link': !category}">{{getNavText(element)}}</a>
            <span *ngIf="!last" class="px-1"> / </span>
					</span>
				</div>
			</div>
		</div>

		<section *ngIf="category">
			<div class="row pl-5 pb-5">
				<div class="col-12">
					{{data[category].summary}}
				</div>
			</div>
			<div *ngFor="let job of data[category].jobs; let I = index; let first = first">
				<div class="row pl-5">
					<div class="col-12 text-left mt-5 h4 lh-3  mb-0 pl-5 border-left-solid" [ngClass]="job.skills ? 'pb-2' : 'pb-4'">
						<img [src]="'assets/img/bullet_'+category+'.png'" class="bullet-img">
						<div class="h6 mb-0">{{job.duration[0] | date:'MMM y'}} - {{job.duration[1] | date:'MMM y'}}</div>
						<span [innerHTML]="job.title"></span>
					</div>
					<p class="col-12 border-left-solid pl-5 mb-0 pb-2" *ngIf="job.skills">
						<span *ngFor="let skill of job.skills; let last = last">
          					{{skill}} <span *ngIf="!last">|</span>
						</span>
					</p>
				</div>
				<div *ngFor="let project of job.projects; let i = index" class="row">

					<div class="col-12 bg-img pl-5" [ngStyle]="{'background-image': 'url(' + getImgUrl(project.projectImg) + ')'}">
						<div class="col-12 text-on-bg-img d-flex flex-column justify-content-start pt-3 pl-5">
							<span *ngIf="!project.details.length && !project.demoLink">
								<h2 class="h4">{{project.projectNameShort || project.projectName}}</h2>
							</span>
							<span *ngIf="project.details.length">
								<h2 class="h4 cursor-pointer" (click)="showDetail['number'+I+'-'+i] = !showDetail['number'+I+'-'+i]">
									{{project.projectNameShort || project.projectName}}
									<span *ngIf="showDetail['number'+I+'-'+i]">
										<svg class="icon icon-expand_more">
											<use xlink:href="#icon-expand_more"></use>
										</svg>
									</span>
									<span *ngIf="!showDetail['number'+I+'-'+i]">
										<svg class="icon icon-expand_less">
											<use xlink:href="#icon-expand_less"></use>
										</svg>
									</span>
								</h2>
							</span>
							<span *ngIf="project.demoLink">
								<a [href]="project.demoLink" target="_blank">
									<h2 class="h4 cursor-pointer" (click)="showDetail['number'+I+'-'+i] = !showDetail['number'+I+'-'+i]">
										{{project.projectNameShort || project.projectName}}
										<svg class="icon icon-open_in_new">
											<use xlink:href="#icon-open_in_new"></use>
										</svg>
									</h2>
								</a>
							</span>
							<p [ngClass]="{'cursor-pointer': project.details.length}" [innerHTML]="project.projectDescription" (click)="showDetail['number'+I+'-'+i] = !showDetail['number'+I+'-'+i]"></p>
							<span *ngIf="project.projectPublication">
								<div class="float-left">
									<svg class="icon icon-file-text-o">
										<use xlink:href="#icon-file-text-o"></use>
									</svg>
								</div>
								<a [href]="project.projectPublicationLink" target="_blank" [innerHTML]="project.projectPublication" class="ml-4 d-block"></a>
							</span>
							<ul *ngIf="showDetail['number'+I+'-'+i]">
								<li *ngFor="let detail of project.details">{{detail}}</li>
							</ul>
						</div>
					</div>



					<div class="col-12 pl-5">
						<div class="col-12 text-on-bg-img d-flex flex-column justify-content-start pt-3 pl-5">
							<span *ngIf="!project.details.length && !project.demoLink">
								<h2 class="h4">{{project.projectNameShort || project.projectName}}</h2>
							</span>
							<span *ngIf="project.details.length">
								<h2 class="h4 cursor-pointer" (click)="showDetail['number'+I+'-'+i] = !showDetail['number'+I+'-'+i]">
									{{project.projectNameShort || project.projectName}}
									<span *ngIf="showDetail['number'+I+'-'+i]">
										<svg class="icon icon-expand_more">
											<use xlink:href="#icon-expand_more"></use>
										</svg>
									</span>
									<span *ngIf="!showDetail['number'+I+'-'+i]">
										<svg class="icon icon-expand_less">
											<use xlink:href="#icon-expand_less"></use>
										</svg>
									</span>
								</h2>
							</span>
							<span *ngIf="project.demoLink">
								<a [href]="project.demoLink" target="_blank">
									<h2 class="h4 cursor-pointer" (click)="showDetail['number'+I+'-'+i] = !showDetail['number'+I+'-'+i]">
										{{project.projectNameShort || project.projectName}}
										<svg class="icon icon-open_in_new">
											<use xlink:href="#icon-open_in_new"></use>
										</svg>
									</h2>
								</a>
							</span>
							<p [ngClass]="{'cursor-pointer': project.details.length}" [innerHTML]="project.projectDescription" (click)="showDetail['number'+I+'-'+i] = !showDetail['number'+I+'-'+i]"></p>
							<span *ngIf="project.projectPublication">
								<div class="float-left">
									<svg class="icon icon-file-text-o">
										<use xlink:href="#icon-file-text-o"></use>
									</svg>
								</div>
								<a [href]="project.projectPublicationLink" target="_blank" [innerHTML]="project.projectPublication" class="ml-4 d-block"></a>
							</span>
							<ul *ngIf="showDetail['number'+I+'-'+i]">
								<li *ngFor="let detail of project.details">{{detail}}</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>
</div>